webpackJsonp([11],{twaN:function(t,e){},wLK4:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("IibD"),a=i("aozt"),n=i.n(a),o={name:"BlogDetail",components:{ModelBox:s.a},data:function(){return{article:{},commentList:[],pv:0,showModelBox:!1}},methods:{domParser:function(t){var e=new DOMParser;this.article.articleContent=e.parseFromString(t,"application/xml")},findArticle:function(){for(var t=this.$route.params.id,e=this.$store.state.articleList,i=0;i<e.length;i++)if(e[i]._id===t){this.article=e[i],this.article.createTime.replace(/\//g,".");break}},handleFormSubmit:function(){var t=this.$refs.form,e=this.$refs.btn,i={userName:"",email:"",content:"",createTime:"",id:""};i.userName=t.elements.userName.value,i.email=t.elements.email.value,i.content=t.elements.content.value,i.id=this.article._id,i.createTime=(new Date).toLocaleString(),""==i.userName||""==i.content?(e.classList.toggle("animated"),e.classList.toggle("shake"),setTimeout(function(){e.classList.toggle("animated"),e.classList.toggle("shake")},1e3)):(this.postCommentData(i),t.elements.userName.value="",t.elements.email.value="",t.elements.content.value="")},postCommentData:function(t){var e=this;n.a.post("/articleComment",t).then(function(t){console.log(t),e.showModelBox=!0}).catch(function(t){console.log(t)})},getCommentList:function(){n.a.get("/articleComment").then(this.getCommentListSucc).catch(function(t){console.log(t)})},getCommentListSucc:function(t){var e=t.data;this.commentList=e.filter(this.filterCommentList)},filterCommentList:function(t){var e=this.article._id;return t.id==e},updateArticlePv:function(t){var e=this;n.a.post("/updateArticlePV",t).then(function(t){e.pv=t.data.pv}).catch(function(t){console.log(t)})},close:function(){this.showModelBox=!1}},mounted:function(){this.findArticle(),this.updateArticlePv({_id:this.article._id}),this.getCommentList()}},r={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"detailBlogWrapper"},[i("header",[i("div",{staticClass:"category"},[i("div",[i("router-link",{attrs:{to:"/",title:"首页"}},[i("i",{staticClass:"iconfont-sm"},[t._v("")])])],1),t._v(" "),i("div",[i("router-link",{attrs:{to:"/blog",title:"我的博客"}},[i("i",{staticClass:"iconfont-sm"},[t._v("")])])],1),t._v(" "),i("div",[i("router-link",{attrs:{to:"/comment",title:"留言板"}},[i("i",{staticClass:"iconfont-sm"},[t._v("")])])],1),t._v(" "),t._m(0),t._v(" "),t._m(1)]),t._v(" "),i("h1",{staticClass:"header animated zoomIn"},[t._v("\n      "+t._s(t.article.articleName)+"\n    ")]),t._v(" "),i("div",{staticClass:"createTime"},[t._v("时间 "+t._s(t.article.createTime)+"  阅读 "+t._s(this.pv)+"  评论 "+t._s(t.commentList.length)+"  ")])]),t._v(" "),i("article",{staticClass:"articleContent",domProps:{innerHTML:t._s(t.article.articleContent)}}),t._v(" "),i("div",{staticClass:"commentRight"},[t._m(2),t._v(" "),i("form",{ref:"form",staticClass:"doComment"},[t._m(3),t._v(" "),t._m(4),t._v(" "),i("div",[i("input",{attrs:{type:"email",placeholder:"Email地址",name:"email"}}),t._v(" "),i("button",{ref:"btn",attrs:{type:"button"},on:{click:t.handleFormSubmit}},[t._v("提交")])])]),t._v(" "),t._l(t.commentList,function(e,s){return i("div",{key:s,staticClass:"peopleCommentWrap"},[i("div",[i("img",{staticClass:"img",attrs:{src:"/static/img/user.png",alt:"用户头像  "}}),t._v(" "),i("span",{staticClass:"userName"},[t._v(t._s(e.userName)+" 说：")]),t._v(" "),i("span",{staticClass:"time"},[t._v(t._s(e.createTime))])]),t._v(" "),i("div",{staticClass:"peopleComment"},[t._v("\n       "+t._s(e.content)+"\n        ")])])})],2),t._v(" "),i("model-box",{directives:[{name:"show",rawName:"v-show",value:t.showModelBox,expression:"showModelBox"}],on:{closeBox:t.close}})],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("a",{attrs:{href:"https://codepen.io/ac-greener/",title:"codepen"}},[e("i",{staticClass:"iconfont-sm"},[this._v("")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("a",{attrs:{href:"https://github.com/AC-greener",title:"github"}},[e("i",{staticClass:"iconfont-sm"},[this._v("")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("header",[e("h1",[e("strong",[this._v("评论区")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("img",{staticClass:"img",attrs:{src:"/static/img/user.png",alt:"用户头像  "}}),this._v(" "),e("input",{staticStyle:{"margin-left":"100px","margin-top":"-50px",display:"block"},attrs:{name:"userName",type:"text",placeholder:"在此输入您的大名*",required:""}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("textarea",{staticStyle:{"margin-right":"10%",width:"100%"},attrs:{name:"content",id:"",rows:"5",placeholder:"我也来说几句*",required:""}})])}]};var c=i("C7Lr")(o,r,!1,function(t){i("twaN")},"data-v-1c249e38",null);e.default=c.exports}});
//# sourceMappingURL=11.54918425b2efa9069dda.js.map